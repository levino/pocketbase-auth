---
import Layout from "../layouts/Layout.astro";

const user = Astro.locals.user;
---

<Layout title="My App">
	<div class="card bg-base-100 shadow-xl w-full max-w-sm">
		<div class="card-body gap-4">
			<h1 class="text-2xl font-bold">My Protected App</h1>
			<div class="text-sm text-base-content/60">
				<p>Welcome, <span class="badge badge-ghost font-mono">{user?.email}</span></p>
				<p class="mt-1">This page is protected by PocketBase auth.</p>
			</div>
			<form action="/auth/logout" method="POST" class="mt-2">
				<button type="submit" class="btn btn-error btn-outline btn-block">Sign out</button>
			</form>
		</div>
	</div>
</Layout>
