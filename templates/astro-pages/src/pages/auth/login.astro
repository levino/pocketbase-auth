---
import Layout from "../../layouts/Layout.astro";
import GithubLoginButton from "../../components/GithubLoginButton.astro";
import GoogleLoginButton from "../../components/GoogleLoginButton.astro";
import MicrosoftLoginButton from "../../components/MicrosoftLoginButton.astro";
import authConfig from "../../authConfig";

const config = {
	pocketbaseUrl: authConfig.pocketbaseUrl,
	redirectUrl: Astro.url.searchParams.get("redirectUrl") || "/",
}
const isExampleConfig = authConfig.pocketbaseGroup === "example"
---

<Layout title="Login">
	{isExampleConfig && (
		<div role="alert" class="alert alert-warning w-full max-w-md mb-4">
			<span>Change pocketbaseGroup in src/authConfig.ts before deploying.</span>
		</div>
	)}
	<div class="card bg-base-100 shadow-xl w-full max-w-md">
		<div class="card-body">
			<h1 class="card-title text-2xl">Login</h1>
			<p class="text-base-content/60">Please sign in to continue.</p>
			<div class="flex flex-col gap-3 mt-4">
				<GithubLoginButton config={config} />
				<GoogleLoginButton config={config} />
				<MicrosoftLoginButton config={config} />
			</div>
		</div>
	</div>
</Layout>
